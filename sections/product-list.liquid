<section class="ryssa-section section" data-section-id="{{ section.id }}">
  <div class="ryssa-container">
    
    <header class="ryssa-section-header fade-in">
      {%- if section.settings.eyebrow != blank -%}
        <span class="ryssa-eyebrow">{{ section.settings.eyebrow }}</span>
      {%- endif -%}
      {%- if section.settings.title != blank -%}
        <h2 class="ryssa-section-title">{{ section.settings.title }}</h2>
      {%- endif -%}
      {%- if section.settings.intro != blank -%}
        <p class="ryssa-section-intro">{{ section.settings.intro }}</p>
      {%- endif -%}
    </header>

    <div class="ryssa-lookbook-grid">
      {%- assign collection = section.settings.collection -%}
      {%- assign limit = section.settings.products_to_show -%}

      {%- if collection != blank and collection.products_count > 0 -%}
        {%- for product in collection.products limit: limit -%}
          
          {%- comment -%} Detect "Featured" tag for large layout {%- endcomment -%}
          {%- assign is_featured = false -%}
          {%- if product.tags contains 'featured' or product.tags contains 'Featured' -%}
            {%- assign is_featured = true -%}
          {%- endif -%}

          <article class="ryssa-card {% if is_featured %}ryssa-card--featured{% endif %} fade-in">
            <a href="{{ product.url }}" class="ryssa-card__link">
              
              <div class="ryssa-card__image-wrapper">
                {%- comment -%} BADGES {%- endcomment -%}
                {%- if is_featured -%}
                  <span class="ryssa-card__badge ryssa-card__badge--editorial">Editor's Pick</span>
                {%- elsif product.available == false -%}
                  <span class="ryssa-card__badge">Sold Out</span>
                {%- elsif product.compare_at_price > product.price -%}
                  <span class="ryssa-card__badge">Sale</span>
                {%- endif -%}

                {%- if product.featured_media -%}
                  {{ product.featured_media | image_url: width: 1200 | image_tag: 
                    loading: 'lazy',
                    class: 'ryssa-card__image',
                    width: product.featured_media.width,
                    height: product.featured_media.height,
                    alt: product.title | escape
                  }}
                {%- else -%}
                  {{ 'product-1' | placeholder_svg_tag: 'ryssa-card__image placeholder-svg' }}
                {%- endif -%}
              </div>

              <div class="ryssa-card__info">
                <h3 class="ryssa-card__title">{{ product.title }}</h3>
                
                {%- comment -%} Caption: Uses Vendor or "Editorial Selection" {%- endcomment -%}
                <p class="ryssa-card__caption">
                  {% if product.metafields.descriptors.subtitle != blank %}
                    {{ product.metafields.descriptors.subtitle }}
                  {% else %}
                    {{ product.vendor }}
                  {% endif %}
                </p>
                
                <p class="ryssa-card__price">
                  {%- if product.compare_at_price > product.price -%}
                    <s style="opacity: 0.6; margin-right: 5px;">{{ product.compare_at_price | money }}</s>
                    {{ product.price | money }}
                  {%- else -%}
                    {{ product.price | money }}
                  {%- endif -%}
                </p>
              </div>
            </a>
          </article>
        {%- endfor -%}
      
      {%- else -%}
        {%- comment -%} EMPTY STATE {%- endcomment -%}
        {%- for i in (1..limit) -%}
          {%- assign is_featured = false -%}
          {%- if i == 1 or i == 4 -%}{%- assign is_featured = true -%}{%- endif -%}
          
          <article class="ryssa-card {% if is_featured %}ryssa-card--featured{% endif %} fade-in">
            <a href="#" class="ryssa-card__link">
              <div class="ryssa-card__image-wrapper">
                {%- if is_featured -%}
                  <span class="ryssa-card__badge ryssa-card__badge--editorial">Editor's Pick</span>
                {%- endif -%}
                {%- capture placeholder_index -%}{% cycle 1, 2, 3, 4, 5, 6 %}{%- endcapture -%}
                {{ 'product-' | append: placeholder_index | placeholder_svg_tag: 'ryssa-card__image placeholder-svg' }}
              </div>
              <div class="ryssa-card__info">
                <h3 class="ryssa-card__title">Lookbook Item {{ i }}</h3>
                <p class="ryssa-card__caption">Curated Selection</p>
                <p class="ryssa-card__price">{{ 19900 | money }}</p>
              </div>
            </a>
          </article>
        {%- endfor -%}
      {%- endif -%}
    </div>
  </div>
</section>

{% stylesheet %}
  /* ========================================
     RYSSA EDITORIAL LOOKBOOK CSS
     (Scoped to avoid theme conflicts)
     ======================================== */
  
  .ryssa-section {
    --color-ivory: #F8F6F3;
    --color-blush: #E3DAC9;
    --color-gold: #8B7355; 
    --color-charcoal: #3A3632;
    --color-text-secondary: #525252;
    --font-editorial: 'Playfair Display', serif;
    --font-body: 'Inter', sans-serif;
    
    --spacing-xs: 8px;
    --spacing-sm: 16px;
    --spacing-md: 24px;
    --spacing-xl: 48px;
    --spacing-2xl: 80px;
    
    padding: 80px 0;
  }

  .ryssa-container {
    width: 100%;
    max-width: 1440px;
    margin: 0 auto;
    padding: 0 24px;
  }

  /* --- HEADER --- */
  .ryssa-section-header {
    text-align: center;
    margin-bottom: 64px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .ryssa-eyebrow {
    display: block;
    font-family: var(--font-body);
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-text-secondary);
    margin-bottom: 16px;
  }

  .ryssa-section-title {
    font-family: var(--font-editorial);
    font-size: clamp(2rem, 4vw, 3.052rem);
    font-weight: 300;
    margin: 0 0 16px 0;
    color: var(--color-charcoal);
  }

  .ryssa-section-intro {
    font-family: var(--font-body);
    font-size: 1.1rem;
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  /* --- GRID SYSTEM --- */
  .ryssa-lookbook-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--spacing-xl);
    margin-top: var(--spacing-2xl);
  }

  /* --- CARD LAYOUTS (FIXED CENTERING) --- */
  
  /* Standard Cards (Span 6 = Exactly 50% width) */
  .ryssa-card {
    display: block;
    position: relative;
    grid-column: span 6; /* Changed from 5 to 6 to fill row and center */
  }

  /* Featured Cards (Span 12 = Full width) */
  .ryssa-card--featured {
    grid-column: span 12; /* Changed from 7 to 12 to center large items */
  }

  /* Offset Pattern (Desktop Only) */
  /* Updated offsets to work with new 6/12 layout */
  @media screen and (min-width: 990px) {
    /* Push every second card down slightly for "staggered" look if desired */
    .ryssa-lookbook-grid .ryssa-card:nth-child(even) {
      margin-top: var(--spacing-xl);
    }
  }

  /* --- CARD STYLING --- */
  .ryssa-card__link {
    display: block;
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @media (hover: hover) {
    .ryssa-card:hover .ryssa-card__link {
      transform: translateY(-4px);
    }
  }

  .ryssa-card__image-wrapper {
    position: relative;
    aspect-ratio: 3 / 4;
    margin-bottom: var(--spacing-md);
    overflow: hidden;
    background-color: var(--color-ivory);
    border-radius: 2px;
  }

  .ryssa-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .ryssa-card__image svg {
    background: #f0f0f0;
  }

  @media (hover: hover) {
    .ryssa-card:hover .ryssa-card__image-wrapper {
      background-color: var(--color-blush);
    }
    .ryssa-card:hover .ryssa-card__image {
      transform: scale(1.03);
    }
  }

  /* --- BADGE --- */
  .ryssa-card__badge {
    position: absolute;
    top: var(--spacing-md);
    left: var(--spacing-md);
    padding: 8px 16px;
    font-family: var(--font-body);
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    background-color: #FFFFFF;
    color: var(--color-charcoal);
    border: 1px solid var(--color-gold);
    z-index: 2;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s ease;
  }

  .ryssa-card__badge--editorial {
    background-color: var(--color-gold);
    color: #FFFFFF;
    border-color: var(--color-gold);
  }

  @media (hover: hover) {
    .ryssa-card:hover .ryssa-card__badge {
      transform: translateY(-2px);
    }
  }

  /* --- INFO --- */
  .ryssa-card__info {
    text-align: left;
    padding: 0 4px;
  }

  .ryssa-card__title {
    font-family: var(--font-editorial);
    font-size: 1.25rem;
    font-weight: 400;
    letter-spacing: 0.02em;
    margin: 0 0 8px 0;
    line-height: 1.3;
    color: var(--color-charcoal);
  }

  .ryssa-card__caption {
    font-family: var(--font-editorial);
    font-style: italic;
    font-size: 0.9rem;
    line-height: 1.6;
    color: var(--color-text-secondary);
    margin: 0 0 8px 0;
    max-width: 90%;
  }

  .ryssa-card__price {
    font-family: var(--font-body);
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    color: var(--color-text-secondary);
    margin-top: 12px;
  }

  /* Featured Text sizing */
  .ryssa-card--featured .ryssa-card__title {
    font-size: 1.75rem;
  }
  .ryssa-card--featured .ryssa-card__caption {
    font-size: 1rem;
    max-width: 85%;
  }

  /* --- MOBILE RESPONSIVENESS --- */
  @media (max-width: 989px) {
    .ryssa-lookbook-grid {
      grid-template-columns: 1fr; /* Stack vertically on mobile */
      gap: 32px;
    }
    
    .ryssa-card, 
    .ryssa-card--featured {
      grid-column: auto; /* Reset column spans */
      width: 100%;
    }
    
    /* Reset offsets */
    .ryssa-lookbook-grid .ryssa-card:nth-child(even) {
      margin-top: 0;
    }
  }

  /* --- FADE IN ANIMATIONS --- */
  .fade-in {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  will-change: opacity, transform; /* Performance hint */
  }

  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }
{% endstylesheet %}

<script src="{{ 'animations.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "Ryssa Lookbook Grid",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "The Lookbook"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Spring Essentials"
    },
    {
      "type": "textarea",
      "id": "intro",
      "label": "Intro Text",
      "default": "Curated pieces for the modern wardrobe, where every selection tells a story of elegance and restraint."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 6,
      "label": "Products to show"
    }
  ],
  "presets": [
    {
      "name": "Ryssa Lookbook Grid"
    }
  ]
}
{% endschema %}