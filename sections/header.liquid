{%- comment -%}
  ----------------------------------------------------------------------------------
  RYSSA HEADER - Custom Implementation
  Replaces standard theme header with custom HTML structure.
  ----------------------------------------------------------------------------------
{%- endcomment -%}

<header class="site-header" data-section-id="{{ section.id }}" data-sticky="{{ section.settings.enable_sticky }}">
  <div class="site-header__inner">
    
    <button class="site-header__menu-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-nav">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <a href="{{ routes.root_url }}" class="site-header__logo" aria-label="{{ shop.name }}">
      {%- if section.settings.logo != blank -%}
        {%- assign logo_height = section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio -%}
        {{ section.settings.logo | image_url: width: section.settings.logo_width | image_tag: 
          class: 'site-header__logo-image',
          widths: '50, 100, 150, 200, 250, 300, 400, 500',
          height: logo_height,
          width: section.settings.logo_width,
          alt: section.settings.logo.alt | default: shop.name | escape
        }}
      {%- else -%}
        <svg width="120" height="32" viewBox="0 0 120 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
          <text x="0" y="24" font-family="Playfair Display, serif" font-size="24" font-weight="300" fill="currentColor">RYSSA</text>
        </svg>
      {%- endif -%}
    </a>

    <nav class="site-header__nav" aria-label="Primary navigation">
      <ul class="site-header__menu">
        {%- for link in linklists[section.settings.menu].links -%}
          <li>
            <a href="{{ link.url }}" {% if link.active %}aria-current="page"{% endif %}>
              {{ link.title }}
            </a>
          </li>
        {%- endfor -%}
      </ul>
    </nav>

    <div class="site-header__actions">
      
      {%- if section.settings.show_search -%}
        <a href="{{ routes.search_url }}" class="site-header__action-btn" aria-label="Search">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <circle cx="9" cy="9" r="6" stroke-width="1.5"/>
            <path d="M13.5 13.5L17 17" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </a>
      {%- endif -%}

      {%- if shop.customer_accounts_enabled -%}
        <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}" class="site-header__action-btn" aria-label="Account">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
            <circle cx="10" cy="7" r="3.5" stroke-width="1.5"/>
            <path d="M4 17C4 13.6863 6.68629 11 10 11C13.3137 11 16 13.6863 16 17" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </a>
      {%- endif -%}

      <a href="{{ routes.cart_url }}" class="site-header__action-btn site-header__cart" id="cart-icon-bubble" aria-label="Cart">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
          <path d="M3 3H4.5L6.5 13H16.5L18.5 6H6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="7.5" cy="16.5" r="1" fill="currentColor"/>
          <circle cx="15.5" cy="16.5" r="1" fill="currentColor"/>
        </svg>
        {%- if cart.item_count > 0 -%}
          <span class="cart-count">{{ cart.item_count }}</span>
        {%- endif -%}
      </a>
    </div>
  </div>
</header>

<div class="mobile-nav-overlay" id="mobile-nav" aria-hidden="true">
  <div class="mobile-nav__header">
    <button class="site-header__menu-close" aria-label="Close menu">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor"><path d="M15 5L5 15M5 5l10 10" stroke-width="1.5" stroke-linecap="round"/></svg>
    </button>
  </div>
  <nav class="mobile-nav" aria-label="Mobile navigation">
    <ul class="mobile-nav__menu">
      {%- for link in linklists[section.settings.menu].links -%}
        <li><a href="{{ link.url }}">{{ link.title }}</a></li>
      {%- endfor -%}
    </ul>
  </nav>
</div>

{% schema %}
{
  "name": "Ryssa Header",
  "settings": [
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 120,
      "unit": "px",
      "label": "Logo Width"
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Main Menu"
    },
    {
      "type": "header",
      "content": "Functionality"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky",
      "default": true,
      "label": "Enable Sticky Header"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "default": true,
      "label": "Show Search Icon"
    }
  ]
}
{% endschema %}

{% stylesheet %}
  /* ------------------------------------------------ */
  /* PASTE YOUR CSS HERE                             */
  /* ------------------------------------------------ */
  
  /* I have added some basic structural CSS so it isn't broken
     until you paste your full CSS. */

  .site-header {
    background: #fff;
    padding: 1rem 2rem;
    position: relative;
    z-index: 100;
  }
  
  /* Flex container for the header items */
  .site-header__inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  /* Navigation Layout */
  .site-header__menu {
    display: flex;
    gap: 2rem;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .site-header__menu a {
    text-decoration: none;
    color: inherit;
    text-transform: uppercase;
    font-size: 0.9rem;
    letter-spacing: 0.05em;
  }

  /* Actions Layout */
  .site-header__actions {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .cart-count {
    font-size: 0.75rem;
    margin-left: 5px;
  }

  /* Mobile Toggle Logic (Hidden on Desktop) */
  .site-header__menu-toggle {
    display: none; 
    background: none;
    border: none;
    cursor: pointer;
  }
  
  .mobile-nav-overlay {
    display: none; /* Hide by default */
  }

  /* Responsive Breakpoint (Matches typical Shopify breakpoint) */
  @media screen and (max-width: 989px) {
    .site-header__nav { display: none; } /* Hide Desktop Menu */
    .site-header__menu-toggle { display: block; } /* Show Toggle */
    
    .mobile-nav-overlay {
      position: fixed;
      top: 0; left: 0; bottom: 0;
      width: 80%;
      background: white;
      z-index: 200;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      padding: 2rem;
      border-right: 1px solid #eee;
      display: block; /* Visible in DOM, but pushed off screen */
    }

    .mobile-nav-overlay.is-open {
      transform: translateX(0);
    }
    
    .mobile-nav__menu {
      list-style: none;
      padding: 0;
    }
    .mobile-nav__menu li {
      margin-bottom: 1rem;
    }
    .mobile-nav__menu a {
      text-decoration: none;
      font-size: 1.2rem;
      color: #000;
    }
  }
{% endstylesheet %}


<script>
  // ------------------------------------------------
  // PASTE YOUR JS HERE
  // ------------------------------------------------

  document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.querySelector('.site-header__menu-toggle');
    const closeBtn = document.querySelector('.site-header__menu-close');
    const mobileNav = document.getElementById('mobile-nav');

    function toggleMenu() {
      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', !isExpanded);
      mobileNav.classList.toggle('is-open');
      mobileNav.setAttribute('aria-hidden', isExpanded);
    }

    if(toggle) toggle.addEventListener('click', toggleMenu);
    if(closeBtn) closeBtn.addEventListener('click', toggleMenu);
  });
</script>