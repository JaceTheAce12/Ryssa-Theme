{%- comment -%}
  ----------------------------------------------------------------------------------
  RYSSA SPLIT CONTENT SECTION
  - Supports Image Left / Image Right layouts
  - Custom color overrides via Schema
  - Animations (Parallax + Fade In) enabled
  ----------------------------------------------------------------------------------
{%- endcomment -%}

<style>
  /* Scoped CSS variables for this specific section instance */
  [data-section-id="{{ section.id }}"] {
    --section-bg-color: {{ section.settings.bg_color }};
    --section-text-color: {{ section.settings.text_color }};
    --section-accent-color: {{ section.settings.accent_color }};
  }
</style>

{% liquid
  assign layout_class = ''
  if section.settings.layout == 'image_right'
    assign layout_class = 'split-block--reverse'
  endif
%}

<section 
  class="split-block {{ layout_class }}" 
  data-section-id="{{ section.id }}"
  style="background-color: var(--section-bg-color); color: var(--section-text-color);"
>
  
  <div class="split-block__image parallax-element">
    {%- if section.settings.image != blank -%}
      {{ section.settings.image | image_url: width: 1280 | image_tag: 
        loading: 'lazy',
        width: section.settings.image.width,
        height: section.settings.image.height,
        sizes: '(min-width: 990px) 50vw, 100vw',
        alt: section.settings.image.alt | escape
      }}
    {%- else -%}
      {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
    {%- endif -%}
  </div>

  <div class="split-block__content fade-in">
    {%- if section.settings.eyebrow != blank -%}
      <span class="eyebrow" style="color: var(--section-accent-color)">{{ section.settings.eyebrow }}</span>
    {%- endif -%}

    {%- if section.settings.title != blank -%}
      <h2 style="color: var(--section-text-color)">{{ section.settings.title }}</h2>
    {%- endif -%}

    {%- if section.settings.text != blank -%}
      <div class="rte" style="color: var(--section-text-color); opacity: 0.8;">
        {{ section.settings.text }}
      </div>
    {%- endif -%}

    {%- if section.settings.link_text != blank and section.settings.link_url != blank -%}
      <a href="{{ section.settings.link_url }}" class="arrow-link" style="color: var(--section-accent-color)">
        <span>{{ section.settings.link_text }}</span>
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M4 10H16M16 10L11 5M16 10L11 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    {%- endif -%}
  </div>

</section>

{% schema %}
{
  "name": "Split Content Block",
  "tag": "section",
  "class": "section-split-content",
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "The Collection"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Timeless Elegance"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description",
      "default": "<p>Discover pieces designed for the modern wardrobe, where simplicity meets sophistication. Each garment is crafted with intention.</p>"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Label",
      "default": "View Collection"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    },
    {
      "type": "header",
      "content": "Layout & Design"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Image Position",
      "options": [
        { "value": "image_left", "label": "Left" },
        { "value": "image_right", "label": "Right" }
      ],
      "default": "image_left"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#F8F6F3"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#1A1A1A"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color (Eyebrow/Link)",
      "default": "#8B7355"
    }
  ],
  "presets": [
    {
      "name": "Split Content Block",
      "settings": {
        "title": "Timeless Elegance",
        "layout": "image_left"
      }
    },
    {
      "name": "Split Content (Reverse)",
      "settings": {
        "title": "Artisanal Quality",
        "layout": "image_right",
        "bg_color": "#e9f5ff",
        "accent_color": "#2C3E50"
      }
    }
  ]
}
{% endschema %}

{% stylesheet %}
  /* ========================================
     SPLIT CONTENT CSS
     ======================================== */

  .split-block {
    display: grid;
    grid-template-columns: 1fr;
    min-height: auto;
    position: relative;
    overflow: hidden;
  }

  @media screen and (min-width: 768px) {
    .split-block {
      grid-template-columns: 1fr 1fr;
      min-height: 80vh;
    }
  }

  /* --- Image Side --- */
  .split-block__image {
    position: relative;
    overflow: hidden;
    min-height: 400px;
    width: 100%;
    height: 100%;
  }

  .split-block__image img,
  .split-block__image svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    position: absolute;
    top: 0; 
    left: 0;
  }

  /* --- Content Side --- */
  .split-block__content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 48px 24px; /* spacing-2xl spacing-md */
  }

  @media screen and (min-width: 1024px) {
    .split-block__content {
      padding: 120px; /* spacing-3xl */
    }
  }

  .split-block__content h2 {
    font-family: var(--font-display, 'Playfair Display', serif);
    font-size: clamp(2rem, 4vw, 3.052rem);
    font-weight: 300;
    line-height: 1.2;
    margin-bottom: 24px;
  }

  .split-block__content p {
    margin-bottom: 1em;
    max-width: 540px;
    font-size: 1rem;
    line-height: 1.6;
  }

  .split-block__content .arrow-link {
    margin-top: 32px;
  }

  /* --- Styles for Layouts --- */
  
  /* Reverse Layout (Image Right) */
  @media screen and (min-width: 768px) {
    .split-block--reverse .split-block__image {
      order: 2;
    }
    .split-block--reverse .split-block__content {
      order: 1;
    }
  }

  /* --- Components (Eyebrow & Link) --- */
  .eyebrow {
    display: block;
    font-family: var(--font-body, sans-serif);
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin-bottom: 16px;
  }

  .arrow-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    text-decoration: none;
    transition: gap 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.2s ease;
  }

  .arrow-link:hover {
    gap: 16px;
    opacity: 0.7;
  }

  .arrow-link svg {
    transition: transform 0.3s ease;
  }

  .arrow-link:hover svg {
    transform: translateX(4px);
  }
{% endstylesheet %}

<script>
  (function() {
    // Simple Parallax & Fade Observer for this section
    document.addEventListener('DOMContentLoaded', function() {
      const section = document.querySelector('[data-section-id="{{ section.id }}"]');
      if(!section) return;

      // Fade In
      const fadeElements = section.querySelectorAll('.fade-in');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      fadeElements.forEach(el => observer.observe(el));

      // Parallax (Simple version)
      const parallaxEl = section.querySelector('.parallax-element img');
      if(parallaxEl && window.matchMedia('(min-width: 768px)').matches) {
        window.addEventListener('scroll', () => {
          const rect = section.getBoundingClientRect();
          if(rect.top < window.innerHeight && rect.bottom > 0) {
            const speed = 0.1; 
            const yPos = (window.scrollY - section.offsetTop) * speed;
            parallaxEl.style.transform = `translateY(${yPos}px)`;
          }
        }, { passive: true });
      }
    });
  })();
</script>