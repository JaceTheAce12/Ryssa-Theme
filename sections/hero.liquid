{%- comment -%}
  ----------------------------------------------------------------------------------
  RYSSA HERO SECTION - MAGAZINE COVER STYLE
  - Features: Grain Texture, Issue Badge, Decorative Letter, Scroll Indicator
  - Supports: Desktop/Mobile Images & Videos
  - Content: HTML-enabled headline for editorial styling
  ----------------------------------------------------------------------------------
{%- endcomment -%}

{% liquid
  # --- Performance Logic ---
  assign loading_attr = 'lazy'
  assign fetch_priority_attr = 'auto'
  
  if section.index == 1
    assign loading_attr = 'eager'
    assign fetch_priority_attr = 'high'
  endif

  # --- Media Logic ---
  assign desktop_media_type = section.settings.desktop_media_type
  assign mobile_media_type = section.settings.mobile_media_type
  
  assign has_mobile_media = false
  if mobile_media_type == 'image' and section.settings.image_mobile != blank
    assign has_mobile_media = true
  elsif mobile_media_type == 'video' and section.settings.video_mobile != blank
    assign has_mobile_media = true
  endif
%}

<section class="hero" data-section-id="{{ section.id }}">
  
  <div class="hero__background parallax-element">
    
    {%- comment -%} 1. VIDEO PLAYERS {%- endcomment -%}
    {%- if desktop_media_type == 'video' and section.settings.video_desktop != blank -%}
      <div class="hero-media-container desktop-only">
        {{ section.settings.video_desktop | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'hero__media-item', image_size: '1920x' }}
      </div>
    {%- endif -%}

    {%- if has_mobile_media and mobile_media_type == 'video' -%}
      <div class="hero-media-container mobile-only">
        {{ section.settings.video_mobile | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'hero__media-item', image_size: '800x' }}
      </div>
    {%- endif -%}

    {%- comment -%} 2. IMAGES (Picture Tag) {%- endcomment -%}
    {%- if desktop_media_type == 'image' or has_mobile_media -%}
      {%- unless desktop_media_type == 'video' and mobile_media_type == 'video' -%}
        <picture>
          {%- if has_mobile_media and mobile_media_type == 'image' -%}
            <source 
              media="(max-width: 767px)" 
              srcset="{{ section.settings.image_mobile | image_url: width: 400 }} 400w, 
                      {{ section.settings.image_mobile | image_url: width: 600 }} 600w, 
                      {{ section.settings.image_mobile | image_url: width: 800 }} 800w"
            >
          {%- endif -%}

          {%- if desktop_media_type == 'image' and section.settings.image_desktop != blank -%}
             <source 
              media="(min-width: 768px)" 
              srcset="{{ section.settings.image_desktop | image_url: width: 1200 }} 1200w, 
                      {{ section.settings.image_desktop | image_url: width: 1600 }} 1600w, 
                      {{ section.settings.image_desktop | image_url: width: 2000 }} 2000w,
                      {{ section.settings.image_desktop | image_url: width: 3000 }} 3000w"
            >
            {%- assign main_image = section.settings.image_desktop -%}
          {%- elsif has_mobile_media and mobile_media_type == 'image' -%}
            {%- assign main_image = section.settings.image_mobile -%}
          {%- else -%}
             {%- assign main_image = blank -%}
          {%- endif -%}

          {%- if main_image != blank -%}
            {{ main_image | image_url: width: 3840 | image_tag:
              loading: loading_attr,
              fetchpriority: fetch_priority_attr,
              alt: main_image.alt,
              class: 'hero__media-item'
            }}
          {%- else -%}
            {%- if desktop_media_type == 'image' -%}
              {{ 'lifestyle-1' | placeholder_svg_tag: 'hero__media-item placeholder-svg' }}
            {%- endif -%}
          {%- endif -%}
        </picture>
      {%- endunless -%}
    {%- endif -%}

    <div class="hero__overlay"></div>
    
    <div class="hero__grain-texture"></div>
  </div>

  {%- if section.settings.issue_number != blank -%}
    <div class="hero__issue-badge">
      <span class="hero__issue-number">{{ section.settings.issue_number }}</span>
      <span class="hero__issue-season">{{ section.settings.issue_season }}</span>
    </div>
  {%- endif -%}

  {%- if section.settings.decorative_letter != blank -%}
    <div class="hero__decorative-letter" aria-hidden="true">{{ section.settings.decorative_letter }}</div>
  {%- endif -%}

  <div class="hero__content fade-in">
    {%- if section.settings.title != blank -%}
      <h1 class="hero__headline">{{ section.settings.title }}</h1>
    {%- endif -%}
    
    {%- if section.settings.text != blank -%}
      <p class="hero__subheadline">{{ section.settings.text }}</p>
    {%- endif -%}
    
    {%- if section.settings.link_text != blank and section.settings.link != blank -%}
      <a href="{{ section.settings.link }}" class="button button--primary hero__cta">
        {{ section.settings.link_text }}
      </a>
    {%- endif -%}
  </div>

  <div class="hero__scroll-indicator">
    <span>Scroll to Explore</span>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M12 5V19M12 19L6 13M12 19L18 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

</section>

{% schema %}
{
  "name": "Ryssa Hero (Magazine)",
  "settings": [
    {
      "type": "header",
      "content": "Magazine Elements"
    },
    {
      "type": "text",
      "id": "issue_number",
      "label": "Issue Number",
      "default": "Issue 01"
    },
    {
      "type": "text",
      "id": "issue_season",
      "label": "Season",
      "default": "Spring 2026"
    },
    {
      "type": "text",
      "id": "decorative_letter",
      "label": "Decorative Letter",
      "default": "R"
    },
    {
      "type": "header",
      "content": "Desktop Media"
    },
    {
      "type": "select",
      "id": "desktop_media_type",
      "label": "Media Type",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "video", "label": "Video" }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "video_desktop",
      "label": "Video (MP4/Shopify Hosted)"
    },
    {
      "type": "header",
      "content": "Mobile Media (Optional)"
    },
    {
      "type": "select",
      "id": "mobile_media_type",
      "label": "Mobile Media Type",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "video", "label": "Video" }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image"
    },
    {
      "type": "video",
      "id": "video_mobile",
      "label": "Mobile Video"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "html",
      "id": "title",
      "label": "Headline (HTML allowed)",
      "default": "Ethereal<br><em>Minimalism</em>",
      "info": "Use <br> for line breaks and <em> for italics."
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Subheadline",
      "default": "Where simplicity meets sophistication"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Button Label",
      "default": "Explore Collection"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Ryssa Hero (Magazine)"
    }
  ]
}
{% endschema %}

{% stylesheet %}
  /* ========================================
     HELPER CLASSES (Liquid Logic)
     ======================================== */
  .desktop-only { display: block; }
  .mobile-only { display: none; }
  
  .hero-media-container {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
  }
  
  .hero__media-item {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0; left: 0;
  }

  @media screen and (max-width: 767px) {
    .desktop-only { display: none; }
    .mobile-only { display: block; }
  }

  /* ========================================
     HERO SECTION - MAGAZINE COVER CSS
     ======================================== */

  .hero {
    /* Define local variables based on provided CSS logic if needed, 
       otherwise assumes global vars exist. Defaults added for safety. */
    --color-white: #FFFFFF;
    --color-black: #1A1A1A;
    --color-gold: #8B7355; 
    --spacing-xs: 8px;
    --spacing-md: 24px;
    --spacing-lg: 32px;
    --spacing-xl: 48px;
    --spacing-2xl: 80px;
    --spacing-3xl: 120px;
    
    position: relative;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    min-height: 700px;
    height: 100vh;
    max-height: 1000px;
    overflow: hidden;
    padding: 0 var(--spacing-2xl);
  }

  .hero__background {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
  }

  .hero__overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.4) 0%,
      rgba(0, 0, 0, 0.1) 50%,
      rgba(0, 0, 0, 0.3) 100%
    );
    z-index: 2;
    pointer-events: none;
  }

  /* Paper Grain Texture */
  .hero__grain-texture {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.02'/%3E%3C/svg%3E");
    z-index: 3;
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  /* Issue Badge - Magazine Style */
  .hero__issue-badge {
    position: absolute;
    top: var(--spacing-xl);
    right: var(--spacing-xl);
    z-index: 10;
    text-align: right;
    color: var(--color-white);
    font-family: var(--font-body);
    text-transform: uppercase;
    letter-spacing: 0.15em;
  }

  .hero__issue-number {
    display: block;
    font-size: 11px;
    font-weight: 600;
    margin-bottom: 4px;
    opacity: 0.9;
  }

  .hero__issue-season {
    display: block;
    font-size: 14px;
    font-weight: 500;
    border-top: 2px solid var(--color-gold);
    padding-top: 8px;
  }

  /* Decorative Letter */
  .hero__decorative-letter {
    position: absolute;
    top: 50%;
    right: 5%;
    transform: translateY(-50%);
    font-family: var(--font-display);
    font-size: clamp(15rem, 25vw, 25rem);
    font-weight: 300;
    color: rgba(255, 255, 255, 0.05);
    z-index: 2;
    line-height: 1;
    pointer-events: none;
    user-select: none;
  }

  /* Magazine-style Content - Asymmetrical Left Placement */
  .hero__content {
    position: relative;
    z-index: 10;
    text-align: left;
    color: var(--color-white);
    padding: var(--spacing-md);
    max-width: 700px;
    margin-left: clamp(var(--spacing-md), 5vw, var(--spacing-3xl));
  }

  .hero__headline {
    font-family: var(--font-display);
    font-size: clamp(3.5rem, 8vw, 7.5rem);
    font-weight: 400;
    letter-spacing: 0.02em;
    line-height: 0.95;
    margin-bottom: var(--spacing-lg);
    color: var(--color-white);
    text-transform: none;
  }

  .hero__headline em {
    display: block;
    font-family: var(--font-editorial, 'Playfair Display', serif);
    font-style: italic;
    font-weight: 400;
    margin-top: 0.1em;
  }

  .hero__subheadline {
    font-family: var(--font-editorial, 'Playfair Display', serif);
    font-style: italic;
    font-size: clamp(1.25rem, 2vw, 2rem);
    font-weight: 400;
    letter-spacing: 0.03em;
    line-height: 1.4;
    margin-bottom: var(--spacing-xl);
    opacity: 0.95;
    max-width: 500px;
  }

  .hero__cta {
    margin-top: var(--spacing-lg);
  }

  /* Elegant Scroll Indicator */
  .hero__scroll-indicator {
    position: absolute;
    bottom: var(--spacing-xl);
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-xs);
    color: var(--color-white);
    font-family: var(--font-body);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    font-weight: 500;
    opacity: 0.8;
    animation: scrollBounce 2s ease-in-out infinite;
  }

  .hero__scroll-indicator svg {
    opacity: 0.6;
  }

  @keyframes scrollBounce {
    0%, 100% {
      transform: translateX(-50%) translateY(0);
    }
    50% {
      transform: translateX(-50%) translateY(10px);
    }
  }

  /* BUTTONS (Scoped) */
  .button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 40px;
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 200px;
  }

  .button--primary {
    background-color: var(--color-black);
    color: var(--color-white);
    border-color: var(--color-black);
  }

  .button--primary:hover {
    background-color: transparent;
    color: var(--color-white);
    border-color: var(--color-white);
  }
{% endstylesheet %}