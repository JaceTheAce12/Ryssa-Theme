{%- comment -%}
  ----------------------------------------------------------------------------------
  RYSSA HERO SECTION - MAGAZINE COVER STYLE
  - Fixed: Removed Parallax to prevent image disappearing on scroll
  - Fixed: Desktop Image aligned Top Center
  ----------------------------------------------------------------------------------
{%- endcomment -%}

{% liquid
  # --- Performance Logic ---
  assign loading_attr = 'lazy'
  assign fetch_priority_attr = 'auto'
  
  if section.index == 1
    assign loading_attr = 'eager'
    assign fetch_priority_attr = 'high'
  endif

  # --- Media Logic ---
  assign desktop_media_type = section.settings.desktop_media_type
  assign mobile_media_type = section.settings.mobile_media_type
  
  assign has_mobile_media = false
  if mobile_media_type == 'image' and section.settings.image_mobile != blank
    assign has_mobile_media = true
  elsif mobile_media_type == 'video' and section.settings.video_mobile != blank
    assign has_mobile_media = true
  endif
%}

<section class="hero" data-section-id="{{ section.id }}">
  
  <div class="hero__background">
    
    {%- comment -%} 1. VIDEO PLAYERS {%- endcomment -%}
    {%- if desktop_media_type == 'video' and section.settings.video_desktop != blank -%}
      <div class="hero-media-container desktop-only">
        {{ section.settings.video_desktop | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'hero__media-item', image_size: '1920x' }}
      </div>
    {%- endif -%}

    {%- if has_mobile_media and mobile_media_type == 'video' -%}
      <div class="hero-media-container mobile-only">
        {{ section.settings.video_mobile | video_tag: autoplay: true, loop: true, muted: true, controls: false, class: 'hero__media-item', image_size: '800x' }}
      </div>
    {%- endif -%}

    {%- comment -%} 2. IMAGES (Picture Tag) {%- endcomment -%}
    {%- if desktop_media_type == 'image' or has_mobile_media -%}
      {%- unless desktop_media_type == 'video' and mobile_media_type == 'video' -%}
        <picture>
          {%- if has_mobile_media and mobile_media_type == 'image' -%}
            <source 
              media="(max-width: 767px)" 
              srcset="{{ section.settings.image_mobile | image_url: width: 400 }} 400w, 
                      {{ section.settings.image_mobile | image_url: width: 600 }} 600w, 
                      {{ section.settings.image_mobile | image_url: width: 800 }} 800w"
            >
          {%- endif -%}

          {%- if desktop_media_type == 'image' and section.settings.image_desktop != blank -%}
             <source 
              media="(min-width: 768px)" 
              srcset="{{ section.settings.image_desktop | image_url: width: 1200 }} 1200w, 
                      {{ section.settings.image_desktop | image_url: width: 1600 }} 1600w, 
                      {{ section.settings.image_desktop | image_url: width: 2000 }} 2000w,
                      {{ section.settings.image_desktop | image_url: width: 3000 }} 3000w"
            >
            {%- assign main_image = section.settings.image_desktop -%}
          {%- elsif has_mobile_media and mobile_media_type == 'image' -%}
            {%- assign main_image = section.settings.image_mobile -%}
          {%- else -%}
             {%- assign main_image = blank -%}
          {%- endif -%}

          {%- if main_image != blank -%}
            {{ main_image | image_url: width: 3840 | image_tag:
              loading: loading_attr,
              fetchpriority: fetch_priority_attr,
              alt: main_image.alt,
              class: 'hero__media-item'
            }}
          {%- else -%}
            {%- if desktop_media_type == 'image' -%}
              {{ 'lifestyle-1' | placeholder_svg_tag: 'hero__media-item placeholder-svg' }}
            {%- endif -%}
          {%- endif -%}
        </picture>
      {%- endunless -%}
    {%- endif -%}

    <div class="hero__overlay"></div>
    <div class="hero__grain-texture"></div>
  </div>

  <div class="hero__content fade-in">
    {%- if section.settings.title_line_1 != blank or section.settings.title_line_2 != blank -%}
      <h1 class="hero__headline">
        {{ section.settings.title_line_1 }}<br>
        <em>{{ section.settings.title_line_2 }}</em>
      </h1>
    {%- endif -%}
    
    {%- if section.settings.text != blank -%}
      <p class="hero__subheadline">{{ section.settings.text }}</p>
    {%- endif -%}
    
    {%- if section.settings.link_text != blank and section.settings.link != blank -%}
      <a href="{{ section.settings.link }}" class="button button--primary hero__cta">
        {{ section.settings.link_text }}
      </a>
    {%- endif -%}
  </div>

  <div class="hero__scroll-indicator">
    <span>Scroll to Explore</span>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M12 5V19M12 19L6 13M12 19L18 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

</section>

{% schema %}
{
  "name": "Ryssa Hero (Magazine)",
  "settings": [
    {
      "type": "header",
      "content": "Desktop Media"
    },
    {
      "type": "select",
      "id": "desktop_media_type",
      "label": "Media Type",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "video", "label": "Video" }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Image"
    },
    {
      "type": "video",
      "id": "video_desktop",
      "label": "Video (MP4/Shopify Hosted)"
    },
    {
      "type": "header",
      "content": "Mobile Media (Optional)"
    },
    {
      "type": "select",
      "id": "mobile_media_type",
      "label": "Mobile Media Type",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "video", "label": "Video" }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image"
    },
    {
      "type": "video",
      "id": "video_mobile",
      "label": "Mobile Video"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title_line_1",
      "label": "Headline (Line 1)",
      "default": "Ethereal"
    },
    {
      "type": "text",
      "id": "title_line_2",
      "label": "Headline (Line 2 - Italic)",
      "default": "Minimalism"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Subheadline",
      "default": "Where simplicity meets sophistication"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Button Label",
      "default": "Explore Collection"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Ryssa Hero (Magazine)"
    }
  ]
}
{% endschema %}

{% stylesheet %}
  /* ========================================
     HELPER CLASSES 
     ======================================== */
  .desktop-only { display: block; }
  .mobile-only { display: none; }
  
  .hero-media-container {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
  }
  
  /* FORCE IMAGE FILL */
  .hero__background picture {
    display: block;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }

  /* MEDIA ITEM STYLING */
  .hero__media-item {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0; left: 0;
    /* Default: Center Center for Mobile */
    object-position: center center;
  }

  @media screen and (max-width: 767px) {
    .desktop-only { display: none; }
    .mobile-only { display: block; }
  }

  /* ========================================
     HERO SECTION - MAGAZINE COVER CSS
     ======================================== */

  .hero {
    --color-white: #FFFFFF;
    --color-black: #1A1A1A;
    --color-primary: #e9f5ff;
    --color-primary-hover: #d4ecff;
    --color-primary-dark: #c0e3ff;
    --font-editorial: 'Bodoni Moda', 'Didot', 'Playfair Display', Georgia, serif;
    --font-body: 'Inter', 'Helvetica Neue', Arial, sans-serif;
    
    --spacing-md: 24px;
    --spacing-lg: 32px;
    --spacing-xl: 48px;
    --spacing-2xl: 80px;
    --spacing-3xl: 120px;
    
    position: relative;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    min-height: 700px;
    height: 100vh;
    max-height: 1000px;
    overflow: hidden;
    padding: 0 var(--spacing-2xl);
  }

  .hero__background {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
    width: 100%;
    height: 100%;
  }

  .hero__overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.4) 0%,
      rgba(0, 0, 0, 0.1) 50%,
      rgba(0, 0, 0, 0.3) 100%
    );
    z-index: 2;
    pointer-events: none;
  }

  /* Paper Grain Texture */
  .hero__grain-texture {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.02'/%3E%3C/svg%3E");
    z-index: 3;
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  /* Magazine-style Content */
  .hero__content {
    position: relative;
    z-index: 10;
    text-align: left;
    color: var(--color-white);
    padding: var(--spacing-md);
    max-width: 700px;
    margin-left: clamp(var(--spacing-md), 5vw, var(--spacing-3xl));
  }

  .hero__headline {
    font-family: var(--font-editorial);
    font-size: clamp(3.5rem, 8vw, 7.5rem);
    font-weight: 400;
    letter-spacing: 0.02em;
    line-height: 0.95;
    margin-bottom: var(--spacing-lg);
    color: var(--color-white);
    text-transform: none;
  }

  .hero__headline em {
    display: block;
    font-family: var(--font-editorial, 'Playfair Display', serif);
    font-style: italic;
    font-weight: 400;
    margin-top: 0.1em;
  }

  .hero__subheadline {
    font-family: var(--font-editorial);
    font-style: italic;
    font-size: clamp(1.25rem, 2vw, 2rem);
    font-weight: 400;
    letter-spacing: 0.03em;
    line-height: 1.4;
    margin-bottom: var(--spacing-xl);
    opacity: 0.95;
    max-width: 500px;
  }

  .hero__cta {
    margin-top: var(--spacing-lg);
  }

  /* Scroll Indicator */
  .hero__scroll-indicator {
    position: absolute;
    bottom: var(--spacing-xl);
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    color: var(--color-white);
    font-family: var(--font-body);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    font-weight: 500;
    opacity: 0.8;
    animation: scrollBounce 2s ease-in-out infinite;
  }

  .hero__scroll-indicator svg {
    opacity: 0.6;
  }

  @keyframes scrollBounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(10px); }
  }

  /* BUTTONS (Scoped) */
  .button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 40px;
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    min-width: 200px;
  }

  .button--primary {
    background-color: var(--color-black);
    color: var(--color-white);
    border-color: var(--color-black);
  }

  .button--primary:hover {
    background-color: transparent;
    color: var(--color-white);
    border-color: var(--color-white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  }

  .button--primary:focus-visible {
    outline: 2px solid var(--color-primary-dark);
    outline-offset: 3px;
  }

  .button--primary:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }

  /* ========================================
     RESPONSIVE BREAKPOINTS
     ======================================== */

  /* Tablet (768px) */
  @media (max-width: 768px) {
    .hero {
      min-height: 600px;
      padding: 0 24px;
      justify-content: center;
    }

    .hero__content {
      margin-left: 0;
      max-width: 100%;
      text-align: center;
    }

    .hero__headline {
      font-size: clamp(2.5rem, 10vw, 4rem);
    }

    .hero__subheadline {
      font-size: clamp(1rem, 4vw, 1.5rem);
      max-width: 100%;
    }

    .hero__scroll-indicator {
      bottom: 32px;
    }
  }

  /* Mobile (480px) */
  @media (max-width: 480px) {
    .hero__headline {
      font-size: 2.5rem;
    }

    .button {
      min-width: 160px;
      padding: 16px 32px;
    }
  }

  /* Desktop Large (1024px+) */
  @media (min-width: 1024px) {
    .hero {
      justify-content: flex-start;
    }

    .hero__content {
      text-align: left;
      margin-left: clamp(24px, 5vw, 120px);
    }
  }

  /* CUSTOM POSITIONING: Desktop Only */
  /* This ensures the image is Top Center on larger screens */
  @media screen and (min-width: 768px) {
    .hero__media-item {
      object-position: top center !important;
    }
  }
{% endstylesheet %}